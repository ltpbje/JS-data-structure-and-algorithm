<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function bucketSort(arr, bucketSize = 3) {
            if (arr.length < 2) {
                return arr;
            }
            const buckets = createBucket(arr, bucketSize);

            return sortBuckets(buckets);
        }
        function createBucket(arr, bucketSize) {
            let minValue = Math.min(...arr);
            let maxValue = Math.max(...arr);
            // console.log(minValue, maxValue);
            const bucketCount = Math.floor((maxValue - minValue) / bucketSize) + 1;
            // console.log(bucketCount);
            // const buckets = [];
            // for (let i = 0; i < bucketCount; i++) {
            //     // 创建桶
            //     buckets[i] = [];
            // }
            const buckets = [...Array(bucketCount)].map(() => []);
            console.log(buckets);
            for (let i = 0; i < arr.length; i++) {
                const index = Math.floor((arr[i] - minValue) / bucketSize);
                buckets[index].push(arr[i]);
            }

            return buckets;

        }
        function sortBuckets(arr) {
            const sortArr = [];
            for (let i = 0; i < arr.length; i++) {

                if (arr[i]) {

                    insertSort(arr[i]);
                    sortArr.push(...arr[i]);
                }
            }
            console.log(sortArr);

            return sortArr;
        }

        function insertSort(arr) {
            // 获取数组的长度
            const { length } = arr;
            // 从第二个元素开始遍历数组
            for (let i = 1; i < length; i++) {
                // 保存当前元素的值
                const temp = arr[i];
                // 从当前元素的前一个位置开始向前遍历
                let j = i;
                // 当j大于0且前一个元素大于当前元素时，将前一个元素向后移动一位
                while (j > 0 && arr[j - 1] > temp) {
                    arr[j] = arr[j - 1];
                    j--;
                }
                // 将当前元素插入到正确的位置
                arr[j] = temp;
            }
            // 输出排序后的数组
            // console.log(arr);
        }

        bucketSort([5, 4, 3, 2, 6, 1, 7, 10, 9, 8])
    </script>
</body>

</html>